<%= form_for @draft_test, url: yield(:draft_test_path), remote: true do |f| %>
  <%= render "shared_example/error_message", object: f.object %>
  <%= token_tag(nil) %>
  <div class="row">
    <div class="card card-nav-tabs col-md-3">
      <div class="card-body">
        <div class="sticky-taskbar">
          <div class="form-group">
            <%= link_to teachers_draft_tests_path, class: "nav-link pl-0" do %>
              <i class="large material-icons">keyboard_backspace</i> back
            <% end %>
          </div>

          <%= render 'dropdown_add_question', f: f %>

          <div class="d-flex justify-content-start flex-wrap gutter-ys" id="list-question-card"></div>

          <div class="border-bottom border-sidebar gutter-ys"></div>
          <label class="mt-1">Ngày bắt đầu</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text pl-0">
                <i class="material-icons">hourglass_top</i>
              </span>
            </div>
            <%= f.text_field :start_time, id: "start_time",
              value: @draft_test.start_time&.strftime(Settings.test.datime_format),
              class: "form-control datetimepicker" %>
          </div>
          <label class="mt-3">Ngày kết thúc</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text pl-0">
                <i class="material-icons">hourglass_bottom</i>
              </span>
            </div>
            <%= f.text_field :due_time, id: "due_time",
              value: @draft_test.due_time&.strftime(Settings.test.datime_format),
              class: "form-control datetimepicker" %>
          </div>
          <label class="mt-3">Thời gian làm bài (phút)</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text pl-0">
                <i class="material-icons">timelapse</i>
              </span>
            </div>
            <%= f.text_field :doing_time, id: "doing_time",
              class: "form-control", placeholder: "45" %>
          </div>
          <div class="form-check pl-1">
            <label class="form-check-label">
              <%= f.check_box :unlimited_flag, id: "unlimited_flag",
                class: "form-check-input" %>
              Unlimited time
              <span class="form-check-sign">
                <span class="check"></span>
              </span>
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="card card-nav-tabs col ml-2">
      <div class="card-header card-header-primary text-center">
        <h2 class="card-title">Bài thi nháp</h2>
      </div>
      <div class="card-body">
        <div class="form-group">
          <label for="title">Tiêu đề</label>
          <%= f.text_field :title, id: "title",
            class: "form-control", placeholder: "De kiem tra giua ky..." %>
        </div>
        <div class="form-group">
          <label for="description">Mô tả</label>
          <%= f.text_field :description, id: "description",
            class: "form-control", placeholder: "De thi gom 2 phan trac nghiem va tu luan..." %>
        </div>
        <div class="form-group">
          <label for="shuffle_count">Trộn đề</label>
          <%= f.text_field :shuffle_count, id: "shuffle_count",
            class: "form-control col-md-2", placeholder: "1" %>
        </div>
        <div class="border-bottom border-sidebar my-4"></div>
        <h3 class="title-multichoice d-none">Phần 1: Trắc nghiệm</h3>
        <%= render partial: 'form_multichoice_question', collection: @draft_test.questions, as: :question %>
        <div id="multi-choice-question-partial"></div>

        <h3 class="title-essay d-none">Phần 2: Tự luận</h3>
        <%= render partial: 'form_essay_question', collection: @draft_test.questions, as: :question %>
        <div id="essay-question-partial"></div>

        <div class="d-flex align-content-center">
          <%= render "updated_at", draft_test: @draft_test %>
          <%= f.submit 'Lưu nháp', class: "btn btn-secondary ml-auto border border-sidebar", id: "submit-draft" %>
          <%= link_to "Tạo bài test", new_test_teachers_draft_test_path(id: @draft_test.id), class: "btn btn-success new-test" %>
        <div>
      </div>
    </div>
  </div>
  <%= render 'modal_delete_question' %>
  <%= render 'form_js', f: f %>
<% end %>
